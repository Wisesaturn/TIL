---
sidebar_position: 2
title: "Cookie & Session"
date: "2022-10-12 12:29:00"
tags: ["CS", "Network"]
categories: "Network"
---

## ğŸ“Œ ì¿ í‚¤ì™€ ì„¸ì…˜ì„ ì‚¬ìš©í•˜ëŠ” ì´ìœ 

HTTP í”„ë¡œí† ì½œì€ ì¼ë°˜ì ìœ¼ë¡œ **Connectionless, Stateless**í•œ í™˜ê²½ì…ë‹ˆë‹¤.

ì´ë¡œì¨ `server`ëŠ” `User`ê°€ ëˆ„êµ¬ì¸ì§€ ë§¤ë²ˆ í™•ì¸í•´ì•¼ í•˜ëŠ” ìƒí™©ì´ ìƒê¹ë‹ˆë‹¤.

ì´ë¥¼ ë³´ì™„í•˜ê¸° ìœ„í•´ **Session**ê³¼ **Cookie**ë¥¼ ì´ìš©í•©ë‹ˆë‹¤.

---

### Connectionless (ë¹„ì—°ê²°ì„±)

#### `User`ì™€ `Server`ê°„ í†µì‹ ì„ í•  ë•Œ `request`ì™€ `response`ë¥¼ ì£¼ê³ ë°›ì€ í›„ ë°”ë¡œ ì—°ê²°ì´ ëŠê¸°ëŠ” íŠ¹ì§•

- ì—°ê²°ì„ ìœ ì§€í•˜ê¸° ìœ„í•´ `resource`ë¥¼ ì¤„ì—¬ ë” ë§ì´ ì—°ê²°í•  ìˆ˜ ìˆìœ¼ë‚˜ ë§¤ë²ˆ ì—°ê²° ê³¼ì •ì„ ë°˜ë³µí•´ì•¼í•˜ë¯€ë¡œ `Overheading`ì´ ë°œìƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
- ì´ì— ëŒ€í•œ í•´ê²°ì±…ìœ¼ë¡œ **KeepAlive** ì†ì„±ì„ HTTP1.1ë¶€í„° Defaultë¡œ ê°€ì§€ê³  ìˆìŠµë‹ˆë‹¤.
  > ì´ëŠ” ì§€ì •ëœ ì‹œê°„ë™ì•ˆ `Packet` êµí™˜ì´ ì—†ì„ ê²½ìš°, ì ‘ì†ì„ ëŠê¸° ì „ ì–´ëŠ ì •ë„ `Packet`ì„ ì£¼ê¸°ì ìœ¼ë¡œ ë³´ë‚´ëŠ” ê²ƒì„ ì˜ë¯¸í•©ë‹ˆë‹¤.
- ì´ë¥¼ í†µí•´ `Client` ìƒíƒœ ì²´í¬ë¥¼ í•˜ë‚˜ ì„œë²„ì— ê³¼ë¶€í•˜ê°€ ê±¸ë¦´ ê²½ìš° ì—­ì‹œ í•œê³„ê°€ ì¡´ì¬í•©ë‹ˆë‹¤.

---

### Stateless (ë¬´ìƒíƒœ)

#### `Server`ëŠ” `User`ë¥¼ ì‹ë³„í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ì¦‰, `Client`ê°€ ëˆ„êµ°ì§€ ëª¨ë¦…ë‹ˆë‹¤.

---

## ğŸª Cookie

#### `Client` Browser ë‚´ì— ì €ì¥ë˜ëŠ” ë°ì´í„° íŒŒì¼

- **key, value, expired, ,domain, path**ë¡œ ì •ë³´ê°€ ì´ë£¨ì–´ì ¸ ìˆë‹¤.
- ë¸Œë¼ìš°ì €ê°€ ì¢…ë£Œë˜ì–´ë„ ë°ì´í„°ë¥¼ ê°–ê³  ìˆì–´ ì¸ì¦ì´ ìœ ì§€ëœë‹¤.
- í•˜ë‚˜ì˜ **Cookie**ëŠ” **4KB**ê¹Œì§€ ì €ì¥ì´ ê°€ëŠ¥í•˜ë‹¤.
- `Client`ì— **300ê°œ**ê¹Œì§€ ì €ì¥í•  ìˆ˜ ìˆìœ¼ë©°, í•˜ë‚˜ì˜ `Domain`ë‹¹ 20ê°œì˜ ê°’ë§Œ ê°€ì§ˆ ìˆ˜ ìˆë‹¤.
- ì¿ í‚¤ëŠ” ì‚¬ìš©ìê°€ ë”°ë¡œ ìš”ì²­í•˜ì§€ ì•Šì•„ë„ **Browser**ê°€ **Request**ì‹œ **Request Header**ì— ë„£ì–´ì„œ ìë™ìœ¼ë¡œ ì„œë²„ì— ì „ì†¡í•œë‹¤.

### êµ¬ì„±ìš”ì†Œ

- **key(name)** : Cookieì˜ ê³ ìœ í•œ ì´ë¦„
- **value** : ì¿ í‚¤ì™€ ê´€ë ¨ëœ ê°’
- **expired** : ì¿ í‚¤ì˜ ìœ ì§€ ì‹œê°„
- **domain** : ì¿ í‚¤ë¥¼ ì „ì†¡í•  ë„ë©”ì¸
- **path** : ì¿ í‚¤ë¥¼ ì „ì†¡í•  ìš”ì²­ ê²½ë¡œ

### ë™ì‘ ë°©ì‹

1. `Client`ê°€ `Server`ì— Pageë¥¼ ìš”ì²­
2. `Server`ì—ì„œ Cookieë¥¼ ìƒì„±
   > Frontend Server/Backend Server ìƒê´€ì—†ì´ Cookie ìƒì„±ì´ ëª¨ë‘ ê°€ëŠ¥í•˜ë‹¤.
3. `HTTP Header`ì— Cookieë¥¼ í¬í•¨í•˜ì—¬ **Response**
4. Cookie ë§Œë£Œ ê¸°ê°„ì´ ì§€ë‚  ë•Œê¹Œì§€ `Client`ì˜ Browserì— ë³´ê´€
5. `Client`ê°€ ê°™ì€ Requestë¥¼ í•  ê²½ìš° `HTTP Header`ì— ìë™ìœ¼ë¡œ Cookieë¥¼ í•¨ê»˜ ë³´ëƒ„

## ğŸ”© Session

#### Cookie ê¸°ë°˜ `Server` ì¸¡ì—ì„œ ê´€ë¦¬í•˜ëŠ” ë°ì´í„° íŒŒì¼

- `Server` ì¸¡ì—ì„œëŠ” `Client`ë¥¼ êµ¬ë¶„í•˜ê¸° ìœ„í•´ ê°ê° ê³ ìœ ì˜ `Session ID`ë¥¼ ë¶€ì—¬í•œë‹¤.
  > `Client`ê°€ Requestë¥¼ ë³´ë‚´ë©´, `Server`ì—ì„œ `Session ID`ë¥¼ ë¶€ì—¬
- Browserê°€ ì¢…ë£Œë˜ê±°ë‚˜ `Server`ì—ì„œ Sessionì„ ì‚­ì œí•˜ë©´ ì¸ì¦ì´ ë§Œë£Œëœë‹¤.
- `Server`ì—ì„œ ê´€ë¦¬í•˜ë¯€ë¡œ ì¿ í‚¤ë³´ë‹¤ ë³´ì•ˆì´ ì¢‹ìœ¼ë‚˜, ì‚¬ìš©ìê°€ ë§ì•„ì§ˆìˆ˜ë¡ `Server` Memoryì— ë¶€í•˜ê°€ ê±¸ë¦°ë‹¤.

### ë™ì‘ ë°©ì‹

1. `Client`ê°€ `Server`ì— ì ‘ì† ì‹œ `Session ID` ë°œê¸‰
2. `Client`ëŠ” `Session ID`ë¥¼ Cookieë¥¼ ì´ìš©í•´ ê°€ì§€ê³  ìˆìŒ
3. `Server`ì— ìš”ì²­í•  ë•Œ `Session ID`ë¥¼ ê°™ì´ ì„œë²„ì— `HTTP Header`ì— equest
4. `Server`ëŠ” `Session ID`ë¥¼ ì „ë‹¬ë°›ì•„ `Session`ì— ìˆëŠ” `Client` ì •ë³´ë¥¼ ì‚¬ìš©
5. `Server` ìš”ì²­ì„ ì²˜ë¦¬ í›„ `Client`ì— ì‘ë‹µ
